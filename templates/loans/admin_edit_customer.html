{% extends "base.html" %}
{% block title %}Edit Customer - {{ customer.name }}{% endblock %}

{% block content %}
<div class="container mt-4" style="max-width: 700px;">
  <h3>Edit Customer</h3>
  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input type="text" name="name" class="form-control" value="{{ customer.name }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Phone</label>
      <input type="text" name="phone" class="form-control" value="{{ customer.phone }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Location</label>
      <input type="text" name="location" class="form-control" value="{{ customer.location }}">
    </div>
    <div class="mb-3">
      <label class="form-label">National ID</label>
      <input type="text" name="national_id" class="form-control" value="{{ customer.national_id }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Credit Score (Loan Limit)</label>
      <input type="number" name="credit_score" class="form-control" value="{{ customer.credit_score }}">
    </div>
    <div class="mb-3 form-check">
      <input type="checkbox" name="has_active_loan" class="form-check-input" id="activeLoan" {% if customer.has_active_loan %}checked{% endif %}>
      <label class="form-check-label" for="activeLoan">Has Active Loan</label>
    </div>
    <div class="mb-3">
      <label class="form-label">Agent</label>
      <select name="agent" class="form-select">
        {% for agent in agents %}
          <option value="{{ agent.id }}" {% if agent.id == customer.agent.id %}selected{% endif %}>
            {{ agent.user.get_full_name|default:agent.user.username }}
          </option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="btn btn-success">Save Changes</button>
    <a href="{% url 'loans:admin_customers' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>
{% endblock %}
